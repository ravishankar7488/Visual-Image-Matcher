<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Similar Images</title>

    <!-- ✅ Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background-color: #f8f9fa;
      }
      .banner-img {
        width: 100%;
        max-height: 250px;
        object-fit: cover;
      }
      .footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        color: #6c757d;
      }
    </style>
  </head>
  <body>
    <!-- ✅ Banner Section -->
    <header>
      <img
        src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1600&q=80"
        alt="Results Banner"
        class="banner-img"
      />
    </header>

    <div class="container mt-5 mb-5">
      <h1 class="text-center mb-4">Similar Images</h1>

      <% if (results.length === 0) { %>
      <div class="alert alert-warning text-center" role="alert">
        No similar images found.
      </div>
      <% } else { %>
      <div class="row row-cols-1 row-cols-md-3 g-4">
        <% results.forEach(hit => { %>
        <div class="col">
          <div class="card h-100 shadow-sm">
            <img
              src="<%= hit.input.data.image.url %>"
              class="card-img-top"
              alt="Similar Image"
            />
            <div class="card-body">
              <h5 class="card-title">Score: <%= hit.score.toFixed(2) %></h5>
              <% if (hit.input.data.metadata) { %>
              <p class="card-text">
                <strong>Name:</strong> <%= hit.input.data.metadata.name %>
              </p>
              <p class="card-text">
                <strong>Category:</strong> <%= hit.input.data.metadata.category
                %>
              </p>
              <% } %>
            </div>
          </div>
        </div>
        <% }) %>
      </div>
      <% } %>
      <p>
        Clarifai’s similarity search feature requires a paid subscription.
        Without this access, the app currently only returns exact matches where
        the image URL corresponds to an already seeded image. Advanced image
        similarity searches are not available in the free version of Clarifai's
        API.
      </p>
      <div class="text-center mt-4">
        <a href="/" class="btn btn-outline-primary btn-lg">Search Again</a>
      </div>
    </div>

    <!-- ✅ Footer -->
    <div class="footer">
      <p>&copy; 2025 Visual Product Matcher. All rights reserved.</p>
    </div>

    <!-- ✅ Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
